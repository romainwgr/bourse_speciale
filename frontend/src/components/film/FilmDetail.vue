<!--
    Composant qui affiche un film en détail après que l'utilisateur ait cliqué dessus
    On y affiche toutes ses infos .. (image, titre, descriptions, acteurs etc...)
-->
<template>
  <div v-if="film" class="film-detail">
    <!-- Section Image -->
    <div class="film-detail__image-container">
      <img 
        :src="film.poster_url" 
        :alt="film.originalTitle" 
        class="film-detail__image" 
      />
    </div>

    <!-- Section Infos -->
    <div class="film-detail__info">

      <h2 class="film-detail__title">{{ film.originalTitle }}</h2>
      <p class="film-detail__year"><strong>Année de sortie :</strong> {{ film.startYear }}</p>
      <p class="film-detail__genre"><strong>Genres :</strong> {{ film.titleType }}</p>
      <p class="film-detail__runtime"><strong>Durée :</strong> {{ film.runtime }}</p>
      <!-- <p class="film-detail__rating"><strong>Note IMDB :</strong> <span class="rating">{{ film.IMDB_Rating }}</span></p> -->
      <p class="film-detail__director"><strong>Réalisateur :</strong> {{ film.director }}</p>
      <p class="film-detail__actors"><strong>Acteurs :</strong> {{ film.actors }}</p>
      <!-- <p class="film-detail__overview"><strong>Résumé :</strong> {{ film.Overview }}</p> -->
    </div>
  </div>

  <!-- Message de chargement -->
  <p v-else class="loading">Chargement des détails du film...</p>
</template>


<script>
import { useRoute } from "vue-router";

export default {
  data() {
    return {
      film: null // Initialisé à null
    };
  },
  async created() {
    const route = useRoute();
    const filmId = route.params.id; // Récupère l'ID du film depuis l'URL

    try {
      const response = await fetch(
        `http://localhost:3000/api/films/${filmId}`
      );

      if (!response.ok) {
        throw new Error(`Erreur HTTP : ${response.status}`);
      }

      const data = await response.json();
      this.film = data; // Stocke les détails du film
    } catch (error) {
      console.error("Erreur lors de la récupération des détails du film :", error);
    }
  }
};
</script>
<style scoped>
.film-detail {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-top: 30px;
  border-radius: 15px;
  backdrop-filter: blur(10px); /* Effet de flou moderne */
  background-color: var(--ui-bg, rgba(44, 44, 44, 0.9)); /* Fond dynamique */
}

.film-detail__image-container {
  display: flex;
  justify-content: center;
  width: 30%;
  height: 100%;
}

.film-detail__image {
  width: 70%; /* Réduit la largeur de l'image */
  max-height: 400px; /* Limite la hauteur maximale de l'image */
  object-fit: cover; /* Maintient les proportions */
  border-radius: 15px; /* Coins arrondis */
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); /* Ombre subtile */
}

.film-detail__info {
  display: flex;
  flex-direction: column;
  width: 70%;
  padding: 30px;
  margin: 50px;
  border-radius: 15px;
  background-color: var(--ui-bg-hover, #3a3a3a); /* Fond dynamique */
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); /* Ombre subtile */
}

.film-detail__title {
  font-size: 36px;
  text-align: start;
  font-weight: bold;
  color: var(--text-high-contrast, white); /* Couleur dynamique */
}

.film-detail__year,
.film-detail__genre,
.film-detail__runtime,
.film-detail__rating,
.film-detail__director,
.film-detail__actors,
.film-detail__overview {
  font-size: 18px;
  color: var(--text-low-contrast, #ccc); /* Couleur dynamique pour les détails */
}

.rating {
  color: var(--accent-color, #ffa500); /* Couleur dynamique pour la note */
  font-weight: bold;
  font-size: 20px;
}

.loading {
  text-align: center;
  margin-top: 50px;
  font-size: 20px;
  color: var(--text-low-contrast, #666); /* Couleur dynamique */
}
</style>
